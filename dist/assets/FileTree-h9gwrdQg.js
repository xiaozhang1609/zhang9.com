import{c as S,u as T,r as c,j as e,F as y}from"./index-CguPUcDn.js";import{U as D}from"./upload-DfKOmvaw.js";import{F as E}from"./file-text-Df_mBEhX.js";import{D as L}from"./download-Ds4xtw-g.js";import{C as R}from"./copy-CxR9XhGJ.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=S("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);function B(){const{t:s}=T(),[d,N]=c.useState(null),[b,m]=c.useState(null),[p,g]=c.useState(!1),[u,v]=c.useState(null),f=c.useCallback((r,l=1)=>{let t={files:0,folders:0,depth:l};return Object.entries(r).forEach(([n,o])=>{if(o===null)t.files++;else{t.folders++;const a=f(o,l+1);t.files+=a.files,t.folders+=a.folders,t.depth=Math.max(t.depth,a.depth)}}),t},[]),h=c.useCallback(r=>{g(!0),m(null);try{const l={};for(const t of r){const n=t.webkitRelativePath.split("/");let o=l;for(let a=0;a<n.length;a++){const i=n[a];a===n.length-1?o[i]=null:(o[i]=o[i]||{},o=o[i])}}N(l),v(f(l))}catch(l){m(s("processError")),console.error("Error processing files:",l)}finally{g(!1)}},[s,f]),x=c.useCallback((r,l="")=>{const t=Object.entries(r).sort(([n],[o])=>{const a=r[n]!==null,i=r[o]!==null;return a===i?n.localeCompare(o):a?-1:1});return t.reduce((n,[o,a],i)=>{const j=i===t.length-1,k=`${l}${j?"â””â”€â”€ ":"â”œâ”€â”€ "}${a!==null?"ðŸ“ ":"ðŸ“„ "}${o}
`;if(a!==null){const C=l+(j?"    ":"â”‚   ");return n+k+x(a,C)}return n+k},"")},[]),w=c.useCallback(()=>{if(!d)return;const r=x(d),l=new Blob([r],{type:"text/plain"}),t=URL.createObjectURL(l),n=document.createElement("a");n.href=t,n.download="directory_structure.txt",n.click(),URL.revokeObjectURL(t)},[d,x]),F=c.useCallback(()=>{d&&navigator.clipboard.writeText(x(d)).then(()=>alert(s("copiedToClipboard"))).catch(()=>m(s("copyFailed")))},[d,x,s]);return e.jsx("div",{className:"w-full max-w-5xl mx-auto p-4 md:p-6 space-y-6",children:e.jsxs("div",{className:"card p-6 md:p-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-6 mb-8 pb-6 border-b border-gray-100 dark:border-gray-800",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-500/10 to-cyan-500/10 dark:from-blue-500/20 dark:to-cyan-500/20 rounded-2xl",children:e.jsx(y,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-gray-50",children:s("fileTree")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1.5 text-sm md:text-base",children:s("fileTreeDesc")})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`relative w-full border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-colors ${p?"border-gray-400 bg-gray-50":"border-gray-300 hover:border-blue-500 dark:border-gray-700 dark:hover:border-blue-400"}`,onDragOver:r=>r.preventDefault(),onDrop:r=>{r.preventDefault(),h(r.dataTransfer.files)},onClick:()=>{if(p)return;const r=document.createElement("input");r.type="file",r.webkitdirectory=!0,r.multiple=!0,r.onchange=l=>{const t=l.target.files;t&&h(t)},r.click()},children:p?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-4 rounded-full bg-gray-300 dark:bg-gray-600"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:s("processing")})]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-12 h-12 mx-auto mb-4 text-gray-400 dark:text-gray-600"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s("dragAndDropFolder")})]})}),u&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:s("folders")})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300 mt-2",children:u.folders})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:s("files")})]}),e.jsx("p",{className:"text-2xl font-bold text-green-700 dark:text-green-300 mt-2",children:u.files})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400",children:[e.jsx(y,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:s("depth")})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300 mt-2",children:u.depth})]})]}),d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:w,className:"flex-1 h-11 flex items-center justify-center gap-2 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-xl transition-colors",children:[e.jsx(L,{className:"w-5 h-5"}),s("download")]}),e.jsxs("button",{onClick:F,className:"flex-1 h-11 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white font-medium rounded-xl transition-colors",children:[e.jsx(R,{className:"w-5 h-5"}),s("copy")]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4",children:s("preview")}),e.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 rounded-xl p-4 text-sm font-mono whitespace-pre overflow-x-auto",children:x(d)})]})]}),b&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg",children:b})]})]})})}export{B as default};
